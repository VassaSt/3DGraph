reearth.ui.show(`
<style>
  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600&family=Roboto:wght@400;500;700&display=swap');

  html,
  body {
    margin: 0;
    width: 160px;
    overflow: hidden;
  }

  #wrapper {
    box-sizing: border-box;
    background-color: #ffffff;
    padding: 12px;
    border-radius: 4px;
  }

  input {
    border: none;
    width: 180px;
    height: 20px;
    color: #141414;
    background-color: #BFBFBF;
    margin-bottom: 10px;
  }

  input::placeholder {
    font-size: 12px;
    padding-left: 4px;
  }

  label {
    display: inline-block;
    width: 55px;
  }

  #start-btn {
    padding: 4px 24px;
    display: block;
    width: 140px;
    font-weight: 500;
    color: #ffffff;
    background-color: #dd00ff;
  }
</style>

<div id="wrapper">
  <button id="start-btn"> START </button>
</div>

<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<script src='https://unpkg.com/@turf/turf@6/turf.min.js'></script>
<script>
  let layerId;
  let reearth, cesium, property, layers;
  let newProperty;
  let resultLang = 'en';
  let newDate = new Date();
  let i = 0;
  let czml;


  window.addEventListener("message", async function (e) {
    if (e.source !== parent) return;
    reearth = e.source.reearth;
    layers = reearth.layers.layers;
    cesium = reearth.Cesium;
  });


  let DataFile = [
    {
      location: "Japan Himeji",
      lat: 134.6854793,
      lng: 34.8153529,
      Value: "598",
      // 2000: "245",
      // 2005: "400",
      // 2010: "550"
    },
  ];


  const btn = document.getElementById("start-btn");



// experiment


// let czmlObj;
// const timeFrom = "1999-01-01T00:00:00.000Z";
// const timeTo = "2016-01-01T14:40:00.000Z";
// const loc = DataFile[0].location;
// const latitude = DataFile[0].lat;
// const longitude = DataFile[0].lng;

// const obj = {
//       id: "greenId",
//       name: "Green cylinder",
//       cityName: loc,
//       position: {
//         cartographicDegrees: [latitude, longitude, 0],
//       }
//     };

//     const obj2 = {
//       cylinder: {
//         length: 300,
//         topRadius: 2000,
//         bottomRadius: 2000,
//         material: {
//           solidColor: {
//             color: {
//               rgba: [0, 255, 0, 255],
//             },
//           },
//         },
//         outline: false,
//       },
//     }

// let clockobj = {
//       interval: timeFrom + "/" + timeTo,
//       currentTime: timeFrom,
//       multiplier: 10518975,
//     };

// function CZML() {}
// CZML.prototype.origin = function() {
//     this.id = "document";
//     this.name = "CZML Geolocation Diagram";
//     this.version = "1.0";
//     this.
// };

// function SubObj() {}
// // Add your code below this line
// SubObj.prototype = Object.create(CZML.prototype);
// SubObj.prototype.constructor = SubObj;
// SubObj.prototype.CZML = function() {
//   // this.clock = clockobj
//   console.log("clockobj")
// };

// function SecondSubObj() {}
// // Add your code below this line
// SecondSubObj.prototype = Object.create(CZML.prototype);
// SecondSubObj.prototype.constructor = SecondSubObj;
// SecondSubObj.prototype.CZML = function() {
//   this.obj = obj
//   this.obj2 = obj2
// };




// function setCZML(){
//   czmlObj = new CZML();
// }

// setCZML()
// let czml = []
// czml.push(czmlObj)

// console.log(czml)




// ------------ original czml -----------

  czml = [{
    id: "document",
    name: "CZML Geolocation Diagram",
    version: "1.0",
  },
  ]





  function setCZML(element) {
    i++

    let latitude = element.lat;
    let longitude = element.lng;

    let Value = element.Value.split(",").join("");
    let location = element.location;

    let redId = "red_" + i;
    let greenId = "green_" + i;
    let blueId = "blue_" + i;


    let cylinderLength = Value - 300;
    let Height = Value / 2;
    let cylinderLength2 = Value - cylinderLength;
    let Height2 = Value;

    let obj = {
      id: greenId,
      name: "Green cylinder",
      cityName: location,
      position: {
        cartographicDegrees: [latitude, longitude, 0],
      },
      cylinder: {
        length: 300,
        topRadius: 2000,
        bottomRadius: 2000,
        material: {
          solidColor: {
            color: {
              rgba: [0, 255, 0, 255],
            },
          },
        },
        outline: false,
      },
    }



    // czml.push({
    //   id: greenId,
    //   name: "Green cylinder",
    //   cityName: location,
    //   position: {
    //     cartographicDegrees: [latitude, longitude, 0],
    //   },
    //   cylinder: {
    //     length: 300,
    //     topRadius: 2000,
    //     bottomRadius: 2000,
    //     material: {
    //       solidColor: {
    //         color: {
    //           rgba: [0, 255, 0, 255],
    //         },
    //       },
    //     },
    //     outline: false,
    //   },
    // },
    //   {
    //     id: redId,
    //     name: "Red cylinder",
    //     cityName: location,
    //     position: {
    //       cartographicDegrees: [latitude, longitude, Height],
    //     },
    //     cylinder: {
    //       length: cylinderLength,
    //       topRadius: 2000,
    //       bottomRadius: 2000,
    //       material: {
    //         solidColor: {
    //           color: {
    //             rgba: [255, 0, 0, 255],
    //           },
    //         },
    //       },
    //       outline: false,
    //     },
    //   },
    //   {
    //     id: blueId,
    //     name: "Blue cylinder",
    //     cityName: location,
    //     position: {
    //       cartographicDegrees: [latitude, longitude, Height2],
    //     },
    //     cylinder: {
    //       length: cylinderLength2,
    //       topRadius: 2000,
    //       bottomRadius: 2000,
    //       material: {
    //         solidColor: {
    //           color: {
    //             rgba: [0, 0, 255, 255],
    //           },
    //         },
    //       },
    //       outline: false,
    //     },
    //   },
    // )
  }


  btn.addEventListener('click', animation);

  function animation() {
    DataFile.map(element => setCZML(element))

    let czmlURL = czml;
    console.log(czmlURL);

    layerId = reearth.layers.add({
      extensionId: "resource",
      isVisible: true,
      title: 'CZML',
      property: {
        default: {
          url: czmlURL,
          type: "czml",
          clampToGround: true
        },
      },
    });

    reearth.camera.flyTo({
      lng: 134.6854793,
      lat: 34.8153529,
      height: 10000,
    }, {
      duration: 2
    });
  }

</script>
`);

reearth.on("update", send);
send();

function send() {
reearth.ui.postMessage({
property: reearth.widget.property,
layer: reearth.layers.layers
})
}